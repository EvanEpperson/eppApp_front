(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{268:function(e,t,a){"use strict";a.d(t,"a",(function(){return ce}));var n=a(0),r=a.n(n),o=(a(355),a(197)),i=a(374),c=a(3),l=(a(357),a(310),a(12)),s=a.n(l),u=a(16),m=a.n(u),d=a(13),f=a.n(d),p=a(15),g=a.n(p),h=a(7),E=a.n(h),b=a(24),y=a(5);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}!function(e){f()(a,e);var t=v(a);function a(e){var n;return s()(this,a),(n=t.call(this,e)).state={},n}m()(a,[{key:"render",value:function(){return r.a.createElement(y.a,{style:C.chat},r.a.createElement(b.a,null,"this is a ChatBox"))}}])}(n.Component);var C=c.a.create({chat:{display:"flex",flexDirection:"column",borderColor:"blue",borderWidth:1,fontSize:400}}),S=a(20),w=a.n(S),x=a(97),k=a(94),O=a(33),R=a(85),P=(a(340),a(341),(0===R.apps.length?R.initializeApp({apiKey:"AIzaSyB7t1HpPUolF1HWAs7d-6OmxGQnYPvD5Z8",authDomain:"epp-messaging.firebaseapp.com",projectId:"epp-messaging",storageBucket:"epp-messaging.appspot.com",messagingSenderId:"966725075871",appId:"1:966725075871:web:d258154f250ec50b5e73aa",measurementId:"G-3P2L2B760R"}):R.app()).firestore()),T=R.auth(),j=function(e){var t=e.navigation,a=Object(n.useState)(""),o=w()(a,2),i=o[0],c=o[1],l=Object(n.useState)(""),s=w()(l,2),u=s[0],m=s[1];Object(n.useEffect)((function(){return T.onAuthStateChanged((function(e){console.log("===================================="),console.log(e),console.log("===================================="),e&&t.replace("Home")}))}),[]);var d=function(){T.signInWithEmailAndPassword(i,u).catch((function(e){return alert(e)}))};return r.a.createElement(k.a,{behavior:"padding",style:L.container},r.a.createElement(x.a,{style:"auto"}),r.a.createElement(O.c,{source:{uri:"https://techcrunch.com/wp-content/uploads/2018/12/getty-messaging.jpg"},style:{width:200,height:200,borderRadius:20}}),r.a.createElement(y.a,{style:L.inputContainer},r.a.createElement(O.d,{placeholder:"Email",autofocus:!0,type:"email",value:i,onChangeText:function(e){return c(e)}}),r.a.createElement(O.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:u,onChangeText:function(e){return m(e)},onSubmitEditing:d})),r.a.createElement(O.b,{containerStyle:L.button,onPress:d,title:"Login"}),r.a.createElement(O.b,{onPress:function(){return t.navigate("Register")},containerStyle:L.button,type:"outline",title:"Register"}),r.a.createElement(y.a,{style:{height:100}}))},L=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10},inputContainer:{width:300},button:{width:200,marginTop:10}}),B=a(262),N=a(375),I=function(){return r.a.createElement(y.a,null,r.a.createElement(N.a,{title:"testing",style:U.button}),r.a.createElement(b.a,null,"testing this page out "))},U=c.a.create({button:{width:200,marginTop:10,color:"red"}}),z=void 0,A=function(e){var t=e.navigation,a=Object(n.useState)(""),o=w()(a,2),i=o[0],c=o[1],l=Object(n.useState)(""),s=w()(l,2),u=s[0],m=s[1],d=Object(n.useState)(""),f=w()(d,2),p=f[0],g=f[1],h=Object(n.useState)(""),E=w()(h,2),b=E[0],v=E[1];Object(n.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[t]);var C=function(){T.createUserWithEmailAndPassword(u,p).then((function(e){e.user.updateProfile({displayName:i,photoURL:b||"https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png"})})).catch((function(e){return alert(e.message)}))};return chooseImage=function(){B.showImagePicker({title:"Select Image",customButtons:[{name:"customOptionKey",title:"Choose Photo from Custom Option"}],storageOptions:{skipBackup:!0,path:"images"}},(function(e){if(console.log("Response = ",e),e.didCancel)console.log("User cancelled image picker");else if(e.error)console.log("ImagePicker Error: ",e.error);else if(e.customButton)console.log("User tapped custom button: ",e.customButton),alert(e.customButton);else{e.uri;console.log("response",JSON.stringify(e)),z.setState({filePath:e,fileData:e.data,fileUri:e.uri})}}))},r.a.createElement(k.a,{behavior:"padding",style:D.container},r.a.createElement(x.a,{style:"auto"}),r.a.createElement(O.f,{h3:!0,style:{marginBottom:50}},"Create A Epp Account"),r.a.createElement(y.a,{style:D.inputContainer},r.a.createElement(O.d,{placeholder:"Full Name",autofocus:!0,type:"text",value:i,onChangeText:function(e){return c(e)}}),r.a.createElement(O.d,{placeholder:"Email",type:"email",value:u,onChangeText:function(e){return m(e)}}),r.a.createElement(O.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:p,onChangeText:function(e){return g(e)}}),r.a.createElement(O.d,{placeholder:"Profile picture Url(optional)",type:"text",value:b,onChangeText:function(e){return v(e)},onSubmitEditing:C})),r.a.createElement(O.b,{style:D.button,raised:!0,onPress:C,title:"Register Now"}),r.a.createElement(O.b,{onPress:chooseImage,style:D.button}),r.a.createElement(I,null),r.a.createElement(y.a,{style:{height:100}}))},D=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10,color:"red"},inputContainer:{width:300}}),W=a(51),F=a(108),H=a(23),J=function(e){var t,a,o,i=e.id,c=e.chatName,l=e.enterChat,s=Object(n.useState)([]),u=w()(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){return P.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return d(e.docs.map((function(e){return e.data()})))}))})),r.a.createElement(O.e,{key:i,onPress:function(){return l(i,c)},key:i,bottomDivider:!0},r.a.createElement(O.a,{rounded:!0,source:{uri:(null==m||null==(t=m[0])?void 0:t.photoURL)||"https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png"}}),r.a.createElement(O.e.Content,null,r.a.createElement(O.e.Title,{style:{fontWeight:"800"}},c),r.a.createElement(O.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==m||null==(a=m[0])?void 0:a.displayName,"   ",null==m||null==(o=m[0])?void 0:o.message)))},M=(c.a.create({}),a(248)),V=a(243),G=function(e){var t=e.navigation,a=Object(n.useState)([]),o=w()(a,2),i=o[0],c=o[1],l=function(){T.signOut().then((function(){t.replace("Login")}))};Object(n.useEffect)((function(){return P.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(n.useLayoutEffect)((function(){t.setOptions({title:"Pen Pals",headerStyle:{backgroundColor:"white"},headerTitleStyle:{color:"blue"},headerTintColor:"black",headerLeft:function(){var e;return r.a.createElement(y.a,{style:{marginLeft:20}},r.a.createElement(H.a,{onPress:l,activeOpacity:.5},r.a.createElement(O.a,{rounded:!0,source:{uri:null==T||null==(e=T.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return r.a.createElement(y.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},r.a.createElement(H.a,{activeOpacity:.5},r.a.createElement(M.a,{name:"camerao",size:24,color:"black"})),r.a.createElement(H.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5},r.a.createElement(V.a,{name:"pencil",size:24,color:"black"})))}})}),[t]);var s=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return r.a.createElement(F.a,null,r.a.createElement(W.a,{style:K.container},i.map((function(e){var t=e.id,a=e.data.chatName;return r.a.createElement(J,{key:t,id:t,chatName:a,enterChat:s})}))))},K=c.a.create({container:{height:"100%"}}),Q=a(22),Y=a.n(Q),Z=a(105),q=function(e){var t=e.navigation,a=Object(n.useState)(""),o=w()(a,2),i=o[0],c=o[1];Object(n.useLayoutEffect)((function(){t.setOptions({title:"Add a New Chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return Y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.awrap(P.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return console.log("===================================="),console.log(i),console.log("===================================="),r.a.createElement(y.a,{style:X.container},r.a.createElement(O.d,{placeholder:"Enter A Chat Name",value:i,onChangeText:function(e){return c(e)},onSubmitEditing:l,leftIcon:r.a.createElement(Z.default,{name:"edit",type:"antdesign",size:24,color:"black"})}),r.a.createElement(O.b,{disabled:!i,onPress:l,title:"Create New Chat"}))},X=c.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),$=a(61),_=a(76),ee=a(72),te=a(238),ae=a(229),ne=(a(345),function(e){var t=e.navigation,a=e.route,o=Object(n.useState)(""),i=w()(o,2),c=i[0],l=i[1],s=Object(n.useState)([]),u=w()(s,2),m=u[0],d=u[1];Object(n.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return r.a.createElement(y.a,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(O.a,{rounded:!0,source:{uri:(null==(e=m[0])?void 0:e.data.photoURL)||"https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png"}}),r.a.createElement(b.a,{style:{color:"blue",marginLeft:10,fontWeight:"900"}},a.params.chatName))},headerLeft:function(){return r.a.createElement(H.a,{style:{marginLeft:10},onPress:t.goBack},r.a.createElement(M.a,{name:"banckward",size:24,color:"white"}))},headerRight:function(){return r.a.createElement(y.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},r.a.createElement(H.a,null,r.a.createElement(te.a,{name:"video-camera",size:24,color:"white"})),r.a.createElement(H.a,null,r.a.createElement(ae.a,{name:"call",size:24,color:"white"})))}})}),[t,a,m]);var f=function(){P.collection("chats").doc(a.params.id).collection("messages").add({timestamp:R.firestore.FieldValue.serverTimestamp(),message:c,displayName:T.currentUser.displayName,email:T.currentUser.email,photoURL:T.currentUser.photoURL}),l("")};return Object(n.useLayoutEffect)((function(){var e=P.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return console.log(m),e}),[a]),r.a.createElement(F.a,{style:{flex:1,backgroundColor:"white"}},r.a.createElement(x.a,{style:"light"}),r.a.createElement(k.a,{behavior:"ios"===Platform.OS?"padding":"height",style:re.container,keyboardVerticalOffset:90},r.a.createElement(ee.a,{onPress:_.a.dismiss},r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{contentContainerStyle:{paddingTop:15}},m.map((function(e){var t=e.id,a=e.data;return a.email===T.currentUser.email?r.a.createElement(y.a,{key:t,style:re.reciever},r.a.createElement(O.a,{position:"absolute",containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,rounded:!0,source:{uri:a.photoURL}}),r.a.createElement(b.a,{style:re.recieverText},a.message)):r.a.createElement(y.a,{key:t,style:re.sender}," ",r.a.createElement(O.a,{position:"absolute",containerStyle:{position:"absolute",bottom:-15,left:-5},bottom:-15,left:-5,size:30,rounded:!0,source:{uri:a.photoURL}}),r.a.createElement(b.a,{style:re.senderText},a.message),r.a.createElement(b.a,{style:re.senderName},a.displayName))}))),r.a.createElement(y.a,{style:re.footer},r.a.createElement($.a,{value:c,onChangeText:function(e){return l(e)},placeholder:"Signal Message",style:re.textInput,blurOnSubmit:!1,onSubmitEditing:f}),r.a.createElement(H.a,{onPress:f},r.a.createElement(ae.a,{name:"send",size:24,color:"#2B68E6"})))))))}),re=c.a.create({container:{flex:1},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"red",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},recieverText:{color:"black",fontWeight:"500",marginLeft:10},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",backgroundColor:"#ECECEC",padding:10,color:"blue",borderRadius:30}}),oe=Object(i.a)(),ie={headerStyle:{backgroundColor:"#F6C455"},headerTitleStyle:{color:"black"},headerTintColor:"white"};function ce(){return r.a.createElement(o.a,null,r.a.createElement(oe.Navigator,{initialRouteName:"Login",screenOptions:ie},r.a.createElement(oe.Screen,{options:{title:"EvMessaging"},name:"Login",component:j}),r.a.createElement(oe.Screen,{options:{title:"Register Here"},name:"Register",component:A}),r.a.createElement(oe.Screen,{name:"Home",component:G}),r.a.createElement(oe.Screen,{name:"AddChat",component:q}),r.a.createElement(oe.Screen,{name:"Chat",component:ne})))}c.a.create({container:{backgroundColor:"#fff",alignItems:"center",justifyContent:"center",borderColor:"black",borderWidth:1}})},280:function(e,t,a){e.exports=a(356)}},[[280,1,2]]]);
//# sourceMappingURL=app.5bb63c38.chunk.js.map